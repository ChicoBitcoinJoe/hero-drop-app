{"version":3,"sources":["assets/bg.png","assets/english.js","services/Magic.js","services/AssetManager.js","components/MapDialog.js","components/SigninDialog.js","components/EditAssetDialog.js","components/Asset.js","components/CreateAssetDialog.js","components/Render.js","components/Scene.js","routes/Home.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","dictionary","title","Box","require","Magic","RPCError","RPCErrorCode","magic","network","useMagicUser","React","useState","isLoggedIn","setLoggedIn","isLoggingIn","setIsLoggingIn","email","setEmail","address","setAddress","box","setBox","login","a","auth","loginWithMagicLink","showUI","user","getMetadata","metadata","publicAddress","openBox","rpcProvider","Error","console","error","code","MagicLinkFailedVerification","MagicLinkExpired","MagicLinkRateLimited","UserAlreadyLoggedIn","logout","set","useAssetManager","defaultAssets","assets","setAssets","indexOf","asset","index","i","length","id","register","toString","log","concat","prevState","useEffect","forEach","get","remove","slice","useStyles","makeStyles","theme","form","margin","spacing","width","paper","height","backgroundColor","padding","maxWidth","maxHeight","MapDialog","props","classes","open","handleClose","Scene","Dialog","onClose","IconButton","className","size","onClick","noValidate","autoComplete","TextField","label","variant","value","image","url","onChange","e","target","type","InputProps","inputProps","min","Number","default","offset","x","y","step","grid","hex","newSize","origin","backgroundImage","backgroundRepeat","backgroundSize","borderRadius","toolbar","display","alignItems","mixins","justifyContent","flexDirection","SigninDialog","handleSignin","style","textAlign","onSubmit","fullWidth","name","placeholder","Button","disabled","formControl","minWidth","selectEmpty","marginTop","EditAssetDialog","Asset","Assets","owned","godMode","editAssetDialogOpen","setEditAssetDialogOpen","event","TextContextMenu","zIndex","AvatarContextMenu","eventLogger","onStart","onDrag","onStop","top","left","cursor","fontSize","fontWeight","text","position","src","Avatar","border","color","whiteSpace","fontColor","overflow","textOverflow","CreateAssetDialog","player","assetType","setAssetType","setText","setName","setUrl","setColor","setFontColor","avatarSize","setAvatarSize","setFontSize","setWidth","setHeight","FormControl","InputLabel","Select","labelId","newType","MenuItem","owner","Render","setPlayer","onKeyDown","key","onKeyUp","document","addEventListener","removeEventListener","setX","setY","assetDialogOpen","setAssetDialogOpen","openAssetDialog","offsetX","offsetY","ContextMenu","ref","alt","onLoad","render","loaded","current","offsetWidth","offsetHeight","viewBox","flat","map","useScene","defaults","imageUrl","setImageUrl","createRef","sceneRef","setSceneRef","imageRef","setImageRef","imageLoaded","setImageLoaded","imageWidth","setImageWidth","imageHeight","setImageHeight","xOffset","setXOffset","yOffset","setYOffset","gridWidth","setGridWidth","gridHeight","setGridHeight","hexagons","setHexagons","hexSize","setHexSize","xOrigin","setXOrigin","yOrigin","setYOrigin","updateGrid","GridGenerator","rectangle","q","r","s","blocked","data","avatar","Home","mapDialogOpen","setMapDialogOpen","signinDialogIsOpen","setSigninDialogIsOpen","closeSigninDialog","SettingsFab","aria-label","SigninButton","right","preventDefault","customMuiTheme","createMuiTheme","palette","App","Dictionary","CssBaseline","exact","path","Boolean","window","location","hostname","match","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.c7847f5e.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/bg.203b271b.png\";","const dictionary = {\r\n  title: 'Hero Drop',\r\n}\r\n\r\nexport default dictionary;\r\n","import React from 'react';\r\n\r\nconst Box = require('3box');\r\nconst { Magic, RPCError, RPCErrorCode } = require('magic-sdk');\r\nconst magic = new Magic('pk_test_F879423DC899077C', {\r\n  network: \"ropsten\" // Supports \"mainnet\", \"rinkeby\", \"ropsten\", \"kovan\"\r\n});\r\n\r\nconst useMagicUser = () => {\r\n  const [isLoggedIn, setLoggedIn] = React.useState(false);\r\n  const [isLoggingIn, setIsLoggingIn] = React.useState(false);\r\n  const [email, setEmail] = React.useState();\r\n  const [address, setAddress] = React.useState();\r\n  const [box, setBox] = React.useState();\r\n\r\n  return {\r\n    isLoggedIn,\r\n    isLoggingIn,\r\n    email,\r\n    address,\r\n    box,\r\n    login: async (email) => {\r\n      setEmail(email)\r\n      setIsLoggingIn(true);\r\n      try {\r\n        await magic.auth.loginWithMagicLink({ email, showUI: true });\r\n        if(await magic.user.isLoggedIn()) {\r\n          let metadata = await magic.user.getMetadata();\r\n          setAddress(metadata.publicAddress);\r\n          setBox(await Box.openBox(metadata.publicAddress, magic.rpcProvider));\r\n          setLoggedIn(true);\r\n        }\r\n        else {\r\n          throw new Error('failed to log in');\r\n        }\r\n      } catch(err) {\r\n        console.error(err)\r\n        if (err instanceof RPCError) {\r\n          switch(err.code) {\r\n            case RPCErrorCode.MagicLinkFailedVerification:\r\n            case RPCErrorCode.MagicLinkExpired:\r\n            case RPCErrorCode.MagicLinkRateLimited:\r\n            case RPCErrorCode.UserAlreadyLoggedIn:\r\n            default: // Handle errors accordingly :)\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      setIsLoggingIn(false);\r\n    },\r\n    logout: async () => {\r\n      // to do\r\n      await box.logout();\r\n      await magic.user.logout();\r\n      setLoggedIn(false);\r\n    },\r\n    set: {\r\n      email: setEmail\r\n    }\r\n  }\r\n}\r\n\r\nexport default useMagicUser;\r\n","import React from 'react';\r\n\r\nfunction useAssetManager (defaultAssets) {\r\n  \r\n  var array = [];\r\n  const [assets, setAssets] = React.useState([]);\r\n\r\n  const indexOf = (asset) => {\r\n    var index = -1;\r\n    for(var i = 0; i < assets.length; i++) {\r\n      if(asset.id === assets[i].id) {\r\n        index = i;\r\n        break;\r\n      }\r\n    }\r\n\r\n    return index;\r\n  }\r\n\r\n  const register = (asset) => {\r\n    if(indexOf(asset) >= 0) return false;\r\n\r\n    if(!asset.id) asset['id'] = assets.length.toString()\r\n\r\n    console.log(assets.concat(asset))\r\n    setAssets(prevState => {\r\n      console.log('registering id:' + asset.id);\r\n      return prevState.concat(asset)\r\n    })\r\n    return true;\r\n  }\r\n\r\n  const remove = (asset) => {\r\n    if(!asset.id) return false;\r\n    const index = indexOf(asset);\r\n    if(index < 0) return false;\r\n\r\n    setAssets(assets.slice(0,index).concat(assets.slice(index+1, assets.length)));\r\n    console.log('removing id:' + asset.id);\r\n    return true;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    defaultAssets.forEach(asset => {\r\n      register(asset)\r\n    })\r\n  }, []);\r\n\r\n  return {\r\n    get: assets,\r\n    assets,\r\n    register,\r\n    remove\r\n  };\r\n    \r\n}\r\n\r\nexport default useAssetManager;","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: \"rgba(21,21,21,0.5)\",\r\n    padding: '32px',\r\n    maxWidth: 'calc(100% - 64px)',\r\n    maxHeight: 'calc(100% - 64px)',\r\n  },\r\n}));\r\n\r\nfunction MapDialog(props) {\r\n\r\n  const classes = useStyles();\r\n  const { open, handleClose, Scene } = props;\r\n\r\n  const handleWidthChange = (width) => {\r\n    width = Number(width);\r\n    if(!width || width <= 0) {\r\n      Scene.image.set.width(Scene.image.default.width)\r\n    }\r\n    else {\r\n      Scene.image.set.width(width)\r\n    }\r\n  }\r\n\r\n  const handleHexSizeChange = (newSize) => {\r\n    if(newSize) Scene.grid.hex.set.size(newSize)\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      onClose={handleClose}\r\n      open={open}\r\n    >\r\n      <div>\r\n        <IconButton className=\"settings-fab\" size=\"small\" onClick={handleClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </div>\r\n      <h1>Settings</h1>\r\n      <h2>Background Image</h2>\r\n      <form className={classes.form} noValidate autoComplete=\"off\">\r\n        <TextField id=\"background-url\"\r\n          label=\"Url\"\r\n          variant=\"outlined\"\r\n          value={Scene.image.url}\r\n          onChange={(e) => {Scene.image.set.url(e.target.value)}}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          InputProps={{\r\n            inputProps: {\r\n              min: 1\r\n            }\r\n          }}\r\n          id=\"background-width\"\r\n          label=\"Width (in pixels)\"\r\n          variant=\"outlined\"\r\n          value={Scene.image.width}\r\n          onChange={(e) => handleWidthChange(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"x-offset\"\r\n          label=\"X Offset (in pixels)\"\r\n          variant=\"outlined\"\r\n          value={Scene.image.offset.x}\r\n          onChange={(e) => Scene.image.offset.set.x(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"y-offset\"\r\n          label=\"Y Offset (in pixels)\"\r\n          variant=\"outlined\"\r\n          value={Scene.image.offset.y}\r\n          onChange={(e) => Scene.image.offset.set.y(e.target.value)}\r\n        />\r\n      </form>\r\n      <h2>Hexagon Grid</h2>\r\n      <form className={classes.form} noValidate autoComplete=\"off\">\r\n        <TextField\r\n          type=\"number\"\r\n          InputProps={{\r\n            inputProps: {\r\n              min: 1,\r\n              step: 0.1\r\n            }\r\n          }}\r\n          id=\"hex-size\"\r\n          label=\"Hex Size\"\r\n          variant=\"outlined\"\r\n          value={Scene.grid.hex.size}\r\n          onChange={(e) => handleHexSizeChange(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"grid-width\"\r\n          label=\"Grid Width (in hexagons)\"\r\n          variant=\"outlined\"\r\n          value={Scene.grid.width}\r\n          onChange={(e) => Scene.grid.set.width(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"grid-height\"\r\n          label=\"Grid Height (in hexagons)\"\r\n          variant=\"outlined\"\r\n          value={Scene.grid.height}\r\n          onChange={(e) => Scene.grid.set.height(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"x-origin\"\r\n          label=\"X Offset\"\r\n          variant=\"outlined\"\r\n          value={Scene.grid.origin.x}\r\n          onChange={(e) => Scene.grid.origin.set.x(e.target.value)}\r\n        />\r\n        <TextField\r\n          type=\"number\"\r\n          id=\"y-origin\"\r\n          label=\"Y Offset\"\r\n          variant=\"outlined\"\r\n          value={Scene.grid.origin.y}\r\n          onChange={(e) => Scene.grid.origin.set.y(e.target.value)}\r\n        />\r\n      </form>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default MapDialog;\r\n","import React from 'react';\r\n\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backgroundImage: {\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundImage: 'url(' + require('../assets/bg.png') + ')',\r\n    backgroundRepeat: \"no-repeat\",\r\n    backgroundSize: \"100%\",\r\n    backgroundColor: \"#151515\",\r\n    padding: '16px',\r\n    maxWidth: '320px',\r\n    maxHeight: '528px',\r\n    borderRadius: '4px',\r\n  },\r\n  toolbar: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(0, 1),\r\n    // necessary for content to be below app bar\r\n    ...theme.mixins.toolbar,\r\n    justifyContent: 'flex-end',\r\n  },\r\n  form: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    alignItems: 'center',\r\n    padding: theme.spacing(0, 3),\r\n  },\r\n}));\r\n\r\nfunction SigninDialog(props) {\r\n  const classes = useStyles();\r\n  const { user, open, handleClose, handleSignin } = props;\r\n\r\n\r\n  return (\r\n    <Dialog\r\n      classes={{\r\n        paper: classes.backgroundImage,\r\n      }}\r\n      onClose={handleClose}\r\n      open={open}\r\n    >\r\n      <div className={classes.toolbar}>\r\n        <IconButton onClick={handleClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </div>\r\n      <div style={{ height: '200px'}}></div>\r\n      <div style={{ height: '15vh'}}></div>\r\n      <h1 style={{ textAlign: 'center', margin: '16px 0 16px 0' }}>Sign In</h1>\r\n      <form className={classes.form} noValidate autoComplete=\"on\" onSubmit={handleSignin}>\r\n        <TextField\r\n          inputProps={{ style: {textAlign: 'center'} }}\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"email\"\r\n          type=\"email\"\r\n          placeholder=\"Enter your email\"\r\n          onChange={(e) => {user.set.email(e.target.value)}}\r\n        />\r\n        <Button\r\n          variant=\"outlined\"\r\n          className=\"green\"\r\n          style={{margin: '16px 0px'}}\r\n          type=\"submit\"\r\n          disabled={!user.email}>\r\n          continue\r\n        </Button>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default SigninDialog;\r\n","import React from 'react';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: \"rgba(21,21,21,0.5)\",\r\n    padding: '32px',\r\n    maxWidth: 'calc(100% - 64px)',\r\n    maxHeight: 'calc(100% - 64px)',\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction EditAssetDialog(props) {\r\n\r\n  const classes = useStyles();\r\n  const { open, handleClose } = props;\r\n  \r\n  return (\r\n    <Dialog\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      onClose={handleClose}\r\n      open={open}\r\n    >\r\n      <div>\r\n        <IconButton className=\"settings-fab\" size=\"small\" onClick={handleClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </div>\r\n      <h1>Edit Asset</h1>\r\n      \r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default EditAssetDialog;\r\n","import React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport Draggable from 'react-draggable'\r\nimport { Menu, Item, Separator, Submenu, MenuProvider } from 'react-contexify'\r\n\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport EditAssetDialog from './EditAssetDialog'\r\n\r\nfunction Asset (props) {\r\n  const { Assets, asset, owned, godMode } = props;\r\n\r\n  const [editAssetDialogOpen, setEditAssetDialogOpen] = React.useState(false)\r\n  const onClick = ({ event, props }) => {\r\n    console.log(event,props);\r\n    setEditAssetDialogOpen(true)\r\n  }\r\n\r\n  const onDialogClose = () => {\r\n    setEditAssetDialogOpen(false)\r\n  }\r\n\r\n  const TextContextMenu = (props) => {\r\n    const { owned, godMode } = props;\r\n\r\n    return <>\r\n      <Menu id={'menu_id_' + asset.id} style={{ zIndex: '99999' }}>\r\n        <Item onClick={onClick}>Edit Asset</Item>\r\n        <Separator />\r\n        <Submenu disabled={!(owned || godMode)} label=\"Delete\">\r\n          <Submenu label=\"Are you sure?\">\r\n            <Item onClick={() => Assets.remove(asset)}>yes</Item>\r\n          </Submenu>\r\n        </Submenu>\r\n      </Menu>\r\n    </>\r\n  }\r\n\r\n  const AvatarContextMenu = () => (\r\n    <Menu id={'menu_id_' + asset.id} style={{ zIndex: '99999' }}>\r\n      <Item disabled onClick={onClick}>Details</Item>\r\n      <Item onClick={onClick}>Edit Asset</Item>\r\n      <Separator />\r\n      <Submenu label=\"Delete\">\r\n        <Submenu label=\"Are you sure?\">\r\n          <Item onClick={() => Assets.remove(asset)}>Yes</Item>\r\n        </Submenu>\r\n      </Submenu>\r\n    </Menu>\r\n  );\r\n\r\n  const eventLogger = (event, props) => {\r\n    console.log(event, props);\r\n  }\r\n\r\n  return <>\r\n    <EditAssetDialog open={editAssetDialogOpen} handleClose={onDialogClose} />\r\n    <MenuProvider id={'menu_id_' + asset.id}>\r\n      <Draggable disabled={!(owned || godMode) }\r\n        onStart={eventLogger }\r\n        onDrag={eventLogger }\r\n        onStop={eventLogger }\r\n      >\r\n        <div className=\"drag-box\" style={{ top: asset.y, left: asset.x, cursor: owned || godMode ? 'move' : 'default' }}>\r\n        {\r\n          asset.type === 'text' ?\r\n            <div style={{ fontSize: asset.fontSize + 'px', fontWeight: asset.fontWeight, width: asset.width, height: asset.height }}>{asset.text}</div> :\r\n          asset.type === 'avatar' ? <>\r\n            <div style={{ position:'absolute', zIndex: '3', width: asset.size + 'px', height: asset.size + 'px' }} src={asset.url}></div>\r\n            <Avatar style={{ zIndex: '2', border: '5px solid ' + asset.color, width: asset.size + 'px', height: asset.size + 'px' }} src={asset.url} />\r\n            {\r\n              !asset.text ? null :\r\n              <div style={{ \r\n                whiteSpace: 'nowrap',\r\n                textAlign: 'center',\r\n                backgroundColor: asset.color, \r\n                color: asset.fontColor,\r\n                margin: '4px 0px', \r\n                padding: '0px 8px', \r\n                height: '20px', \r\n                width: asset.size + 'px', \r\n                overflow: 'hidden', \r\n                textOverflow: 'ellipsis', \r\n                borderRadius: '16px' \r\n              }}>\r\n                {asset.text}\r\n              </div> \r\n            }\r\n          </>:\r\n          null\r\n        }\r\n        </div>\r\n      </Draggable>\r\n    </MenuProvider>\r\n    {\r\n      asset.type === 'text' ?\r\n        <TextContextMenu {...props} /> :\r\n      asset.type === 'avatar' ?\r\n        <AvatarContextMenu {...props} /> :\r\n      null\r\n    }\r\n  </>\r\n}\r\n\r\nexport default Asset;\r\n","import React from 'react';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from '@material-ui/core/Select';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  form: {\r\n    '& > *': {\r\n      margin: theme.spacing(1),\r\n      width: '25ch',\r\n    },\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: \"rgba(21,21,21,0.5)\",\r\n    padding: '32px',\r\n    maxWidth: 'calc(100% - 64px)',\r\n    maxHeight: 'calc(100% - 64px)',\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(1),\r\n    minWidth: 120,\r\n  },\r\n  selectEmpty: {\r\n    marginTop: theme.spacing(2),\r\n  },\r\n}));\r\n\r\nfunction CreateAssetDialog(props) {\r\n\r\n  const classes = useStyles();\r\n  const { open, handleClose, x, y, player, Assets } = props;\r\n  \r\n  const [assetType, setAssetType] = React.useState('avatar')\r\n  const [text, setText] = React.useState('')\r\n  const [name, setName] = React.useState('')\r\n  const [url, setUrl] = React.useState('')\r\n  const [color, setColor] = React.useState('#111')\r\n  const [fontColor, setFontColor] = React.useState('#EEE')\r\n  const [avatarSize, setAvatarSize] = React.useState(100)\r\n  const [fontSize, setFontSize] = React.useState(18)\r\n  const [width, setWidth] = React.useState(320)\r\n  const [height, setHeight] = React.useState(160)\r\n  \r\n  const handleTypeChange = (newType) => {\r\n    setAssetType(newType)\r\n  }\r\n\r\n  const createAvatarAsset = () => {\r\n    Assets.register({\r\n      type: assetType,\r\n      text: name,\r\n      url,\r\n      color,\r\n      fontColor,\r\n      owner: player,\r\n      size: avatarSize,\r\n      x: x - avatarSize/2,\r\n      y: y - avatarSize/2,\r\n    });\r\n    \r\n    handleClose()\r\n  }\r\n\r\n  const createTextAsset = () => {\r\n    Assets.register({\r\n      type: assetType,\r\n      text,\r\n      url,\r\n      color,\r\n      owner: player,\r\n      fontSize,\r\n      width,\r\n      height,\r\n      x: x,\r\n      y: y,\r\n    });\r\n    \r\n    handleClose()\r\n  }\r\n  \r\n  return (\r\n    <Dialog\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      onClose={handleClose}\r\n      open={open}\r\n    >\r\n      <div>\r\n        <IconButton className=\"settings-fab\" size=\"small\" onClick={handleClose}>\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </div>\r\n      <h1>Create Asset</h1>\r\n      <form className={classes.form} noValidate autoComplete=\"off\">\r\n        <FormControl className={classes.formControl}>\r\n          <InputLabel id=\"demo-simple-select-label\">Type</InputLabel>\r\n          <Select\r\n            labelId=\"demo-simple-select-label\"\r\n            id=\"demo-simple-select\"\r\n            value={assetType}\r\n            onChange={(e) => handleTypeChange(e.target.value)}\r\n          >\r\n            <MenuItem value={'avatar'}>Avatar</MenuItem>\r\n            <MenuItem value={'text'}>Text</MenuItem>\r\n          </Select>\r\n        </FormControl>\r\n        <br /> <br />\r\n        {\r\n          assetType === 'avatar' ? <>\r\n            <TextField \r\n              id=\"avatar-url\"\r\n              label=\"Url\"\r\n              variant=\"outlined\"\r\n              value={url}\r\n              onChange={(e) => {setUrl(e.target.value)}}\r\n            />\r\n            <TextField \r\n              id=\"avatar-name\"\r\n              label=\"Name Tag\"\r\n              variant=\"outlined\"\r\n              value={name}\r\n              onChange={(e) => {setName(e.target.value)}}\r\n            /> \r\n            <TextField\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: {\r\n                  min: 10\r\n                }\r\n              }}\r\n              id=\"avatar-size\"\r\n              label=\"Size\"\r\n              variant=\"outlined\"\r\n              value={avatarSize}\r\n              onChange={(e) => setAvatarSize(e.target.value)}\r\n            />\r\n            <TextField id=\"avatar-font-color\"\r\n              label=\"Font Color\"\r\n              variant=\"outlined\"\r\n              value={fontColor}\r\n              onChange={(e) => {setFontColor(e.target.value)}}\r\n            />\r\n          </> :\r\n          assetType === 'text' ? <>\r\n            <TextField \r\n              id=\"text-content\"\r\n              label=\"Text\"\r\n              variant=\"outlined\"\r\n              value={text}\r\n              onChange={(e) => {setText(e.target.value)}}\r\n            />\r\n            <TextField\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: {\r\n                  min: 10\r\n                }\r\n              }}\r\n              id=\"font-size\"\r\n              label=\"Font Size\"\r\n              variant=\"outlined\"\r\n              value={fontSize}\r\n              onChange={(e) => setFontSize(e.target.value)}\r\n            />\r\n            <TextField\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: {\r\n                  min: 10\r\n                }\r\n              }}\r\n              id=\"text-width\"\r\n              label=\"Width (in pixels)\"\r\n              variant=\"outlined\"\r\n              value={width}\r\n              onChange={(e) => setWidth(e.target.value)}\r\n            />\r\n            <TextField\r\n              type=\"number\"\r\n              InputProps={{\r\n                inputProps: {\r\n                  min: 10\r\n                }\r\n              }}\r\n              id=\"text-height\"\r\n              label=\"Height (in pixels)\"\r\n              variant=\"outlined\"\r\n              value={height}\r\n              onChange={(e) => setHeight(e.target.value)}\r\n            />\r\n          </>\r\n          : null        \r\n        }\r\n        <TextField id=\"avatar-color\"\r\n          label=\"Background Color\"\r\n          variant=\"outlined\"\r\n          value={color}\r\n          onChange={(e) => {setColor(e.target.value)}}\r\n        />        \r\n      </form>\r\n      <br />\r\n      {\r\n        assetType === 'avatar' ? \r\n          <Button onClick={createAvatarAsset} disabled={!url}>Create Asset</Button> :\r\n        assetType === 'text' ?\r\n          <Button onClick={createTextAsset} disabled={!text}>Create Asset</Button> :\r\n        null\r\n      }\r\n      \r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default CreateAssetDialog;\r\n","import React from 'react'\r\n\r\nimport { HexGrid, Layout } from 'react-hexgrid'\r\nimport { Menu, Item, MenuProvider } from 'react-contexify'\r\n\r\nimport Asset from '../components/Asset'\r\nimport AssetDialog from './CreateAssetDialog'\r\n\r\nfunction Render (props) {\r\n  \r\n  const { Scene, Assets } = props;  \r\n\r\n  const defaultPlayer = 'player1';\r\n  const [player, setPlayer] = React.useState('player1');\r\n\r\n  React.useEffect(() => {\r\n    const onKeyDown = ({key}) => {\r\n      if(key === 'Control') {\r\n        setPlayer('bard')\r\n      }\r\n    }\r\n\r\n    const onKeyUp = ({key}) => {\r\n      if(key === 'Control') {\r\n        setPlayer(defaultPlayer)\r\n      }\r\n    }\r\n\r\n    document.addEventListener('keydown', onKeyDown);\r\n    document.addEventListener('keyup', onKeyUp);\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', onKeyDown);\r\n      document.removeEventListener('keyup', onKeyUp);\r\n    }\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const [x, setX] = React.useState(0);\r\n  const [y, setY] = React.useState(0);\r\n  const [assetDialogOpen, setAssetDialogOpen] = React.useState(false);\r\n  const openAssetDialog = ({ event, props }) => {\r\n    //console.log(event, props);\r\n    setX(event.offsetX);\r\n    setY(event.offsetY);\r\n    setAssetDialogOpen(true);\r\n  }\r\n\r\n  const onAssetDialogClose = () => {\r\n    setAssetDialogOpen(false);\r\n  }\r\n\r\n  const ContextMenu = () => (\r\n    <Menu id='menu_id_hex' style={{ zIndex: '99999' }}>\r\n      <Item onClick={openAssetDialog}>Add Asset</Item>\r\n    </Menu>\r\n  );\r\n\r\n  return <>\r\n    <AssetDialog open={assetDialogOpen} handleClose={onAssetDialogClose} Scene={Scene} x={x} y={y} Assets={Assets} player={player} />\r\n    <div ref={Scene.ref} className=\"image-container\" style={{ padding: Scene.image.offset.y + 'px ' + Scene.image.offset.x + 'px' }}>\r\n      <img alt=\"background\"\r\n        ref={Scene.image.ref}\r\n        style={{ width: Scene.image.width + 'px' }}\r\n        onLoad={Scene.render}\r\n        src={Scene.image.url}\r\n        />\r\n    </div>\r\n    <MenuProvider id='menu_id_hex' style={{ height: '100%' }}>\r\n      { !Scene.loaded ? null : <>\r\n        <div className=\"hexgrid-container\">\r\n          <HexGrid\r\n            width={Scene.ref.current.offsetWidth}\r\n            height={Scene.ref.current.offsetHeight}\r\n            viewBox={Scene.grid.origin.x + \" \" + Scene.grid.origin.y + \" 100 100\"}>\r\n            <Layout className=\"hexagons\"\r\n              size={{ x: Scene.grid.hex.size, y: Scene.grid.hex.size }}\r\n              spacing={1}\r\n              flat={false}\r\n              origin={{ x: 0, y: 0 }}\r\n            >\r\n              {Scene.grid.render()}\r\n            </Layout>\r\n          </HexGrid>\r\n        </div>\r\n        <div className=\"asset-container\">\r\n          {\r\n            Assets.get.map((asset, i) => {\r\n              return <Asset key={asset.id} \r\n                asset={asset} \r\n                Assets={Assets} \r\n                owned={asset.owner === player} \r\n                godMode={player === 'bard'} \r\n              />\r\n            })\r\n          }\r\n        </div>\r\n      </>}\r\n    </MenuProvider>\r\n    <ContextMenu />\r\n  </>;\r\n}\r\n\r\nexport default Render;\r\n","import React from 'react'\r\n\r\nimport { GridGenerator, Hexagon } from 'react-hexgrid';\r\n\r\nimport '../components/Hexagon.css';\r\n\r\nfunction useScene (url, defaults) {\r\n\r\n  const [imageUrl, setImageUrl] = React.useState(url);\r\n  const [sceneRef, setSceneRef] = React.useState(React.createRef());\r\n  const [imageRef, setImageRef] = React.useState(React.createRef());\r\n  const [imageLoaded, setImageLoaded] = React.useState(false);\r\n  const [imageWidth, setImageWidth] = React.useState(defaults.width);\r\n  const [imageHeight, setImageHeight] = React.useState();\r\n  const [xOffset, setXOffset] = React.useState(0);\r\n  const [yOffset, setYOffset] = React.useState(0);\r\n  const [gridWidth, setGridWidth] = React.useState();\r\n  const [gridHeight, setGridHeight] = React.useState();\r\n  const [hexagons, setHexagons] = React.useState();\r\n  const [hexSize, setHexSize] = React.useState(6);\r\n  const [xOrigin, setXOrigin] = React.useState(15.5);\r\n  const [yOrigin, setYOrigin] = React.useState(-6);\r\n  const [avatarSize, setAvatarSize] = React.useState(100);\r\n\r\n  const updateGrid = (width, height) => {\r\n    const grid = GridGenerator.rectangle(width, height);\r\n    setGridWidth(width);\r\n    setGridHeight(height);\r\n    setHexagons(grid);\r\n  }\r\n\r\n  const setSceneWidth = (width) => {\r\n    setImageWidth(width);\r\n    setImageHeight(imageRef.current.offsetHeight);\r\n  }\r\n\r\n  const Scene = {\r\n    loaded: imageLoaded,\r\n    ref: sceneRef,\r\n    set: {\r\n      ref: setSceneRef\r\n    },\r\n    defaults,\r\n    render: () => {\r\n      console.log(imageRef.current.offsetWidth);\r\n      console.log(imageRef.current.offsetHeight);\r\n      updateGrid(14, 11);\r\n      setImageWidth(imageRef.current.offsetWidth);\r\n      setImageHeight(imageRef.current.offsetHeight);\r\n      setImageLoaded(true);\r\n    },\r\n    image: {\r\n      loaded: imageLoaded,\r\n      url: imageUrl,\r\n      ref: imageRef,\r\n      width: imageWidth,\r\n      height: imageHeight,\r\n      offset: {\r\n        x: xOffset,\r\n        y: yOffset,\r\n        set: {\r\n          x: setXOffset,\r\n          y: setYOffset\r\n        }\r\n      },\r\n      default: {\r\n        width: defaults.width,\r\n        height: defaults.height,\r\n      },\r\n      set: {\r\n        url: setImageUrl,\r\n        ref: (ref) => {\r\n          setImageRef(ref);\r\n        },\r\n        width: setSceneWidth\r\n      }\r\n    },\r\n    grid: {\r\n      render: () => {\r\n        if(!hexagons) return <h1>Loading</h1>;\r\n        \r\n        return hexagons.map((hex, i) => (\r\n          <Hexagon\r\n            key={i}\r\n            q={hex.q}\r\n            r={hex.r}\r\n            s={hex.s}\r\n            className={(hex.blocked ? 'blocked' : null)}\r\n            data={hex}\r\n          ></Hexagon>\r\n        ));\r\n      },\r\n      width: gridWidth,\r\n      height: gridHeight,\r\n      origin: {\r\n        x: xOrigin,\r\n        y: yOrigin,\r\n        set: {\r\n          x: setXOrigin,\r\n          y: setYOrigin,\r\n        }\r\n      },\r\n      hex: {\r\n        size: hexSize,\r\n        set: {\r\n          size: setHexSize\r\n        }\r\n      },\r\n      set: {\r\n        width: (width) => {\r\n          setGridWidth(width);\r\n          updateGrid(width, gridHeight);\r\n        },\r\n        height: (height) => {\r\n          setGridHeight(height);\r\n          updateGrid(gridWidth, height);\r\n        }\r\n      }\r\n    },\r\n    avatar: {\r\n      size: avatarSize,\r\n      set: {\r\n        size: setAvatarSize\r\n      }\r\n    }\r\n  }\r\n\r\n  return Scene;\r\n}\r\n\r\nexport default useScene;\r\n","import React from 'react'\r\n\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport MapDialog from '../components/MapDialog';\r\nimport SigninDialog from '../components/SigninDialog';\r\nimport Render from '../components/Render'\r\nimport useScene from '../components/Scene'\r\n\r\nimport 'react-contexify/dist/ReactContexify.min.css';\r\n\r\nfunction Home (props) {\r\n\r\n  const { user, Assets } = props;\r\n\r\n  const defaultBackgroundUrl = 'https://mk0a2minutetabl7hq7i.kinstacdn.com/wp-content/uploads/2019/05/Jungle-Temple-RPG-battle-map-color.jpg';\r\n  const Scene = useScene(defaultBackgroundUrl, { width: 1534 });\r\n\r\n  const [mapDialogOpen, setMapDialogOpen] = React.useState(false);\r\n  const openMapDialog = () => { setMapDialogOpen(true) };\r\n  const closeMapDialog = () => { setMapDialogOpen(false) };\r\n\r\n  const [signinDialogIsOpen, setSigninDialogIsOpen] = React.useState(false);\r\n  const openSigninDialog = () => { setSigninDialogIsOpen(true) };\r\n  const closeSigninDialog = () => { setSigninDialogIsOpen(false) };\r\n\r\n  const handleSignin = (e) => {\r\n    e.preventDefault();\r\n    console.log(user.email)\r\n    // validate(email)\r\n    closeSigninDialog();\r\n    // await sign in success\r\n  };\r\n\r\n  function SettingsFab (props) {\r\n    return <>\r\n      <div className=\"fab-container\">\r\n        <IconButton className=\"settings-fab\" onClick={props.onClick} size=\"small\" aria-label=\"settings fab\">\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </div>\r\n    </>;\r\n  }\r\n  \r\n  function SigninButton (props) {\r\n    return <div style={{ position: 'absolute', top: '64px', right: '64px', zIndex: '4' }}>\r\n      <Button size=\"small\" className=\"green\" onClick={props.onClick} style={{ padding: '8px 16px' }}>sign in</Button>\r\n    </div>\r\n  }\r\n\r\n  return <>\r\n    <SigninDialog user={user} open={signinDialogIsOpen} handleClose={closeSigninDialog} handleSignin={handleSignin} />\r\n    <MapDialog open={mapDialogOpen} handleClose={closeMapDialog} Scene={Scene} />\r\n    { Scene.loaded && !mapDialogOpen ? <SettingsFab onClick={openMapDialog} /> : null}\r\n    { Scene.loaded && !mapDialogOpen ? <SigninButton onClick={openSigninDialog} user={user} /> : null}\r\n    <div className=\"outer-container\">\r\n      <div className=\"inner-container\">\r\n        <Render Scene={Scene} Assets={Assets} />\r\n      </div>\r\n    </div>\r\n  </>;\r\n}\r\n\r\nexport default Home;\r\n","import React, { useEffect } from 'react';\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\n\nimport './App.css';\nimport Dictionary from './assets/english';\nimport useMagicUser from './services/Magic';\nimport useAssetManager from './services/AssetManager';\n\n/*\nimport Toolbar from '@material-ui/core/Toolbar';\nimport SigninDialog from './components/SigninDialog';\nimport Header from './components/Header';\nimport ScrollToTop from './components/ScrollToTop';\n*/\nimport Home from './routes/Home';\nconst customMuiTheme = createMuiTheme({ palette: { type: \"dark\" }});\n\nfunction useDocumentTitle(title) {\n  useEffect(() => {\n    document.title = title;\n  });\n}\n\nconst defaultAssets = [\n  {\n    id: '0',\n    type: 'avatar',\n    url: \"https://theoneworldblog.files.wordpress.com/2017/11/shepherd-druid.jpg?w=100\",\n    x: 1412,\n    y: 502,\n    owner: 'bard',\n    color: '#ff5959',\n    text: 'Marga Thellow',\n    size: 100\n  },\n  {\n    id: '1',\n    type: 'avatar',\n    url: \"https://external-preview.redd.it/rBBZcGNkiqI9Bvx-fB9XT9KEniDWNeuBNvs5EtZylYc.png?auto=webp&s=149ae6bfeeccd69989b1650309d623352fcaa4ca\",\n    x: 66,\n    y: 306,\n    owner: 'player1',\n    color: '#59ff59',\n    text: 'Thader',\n    size: 100\n  },  \n  {\n    id: '2',\n    type: 'text',\n    text: 'Hold \"ctrl\" to enable god mode',\n    fontSize: 24,\n    x: 1262,\n    y: 452,\n    owner: 'bard',\n    color: 'white',\n    width: 250,\n    height: 100,\n  },\n  {\n    id: '3',\n    type: 'text',\n    text: 'Hero Drop',\n    fontSize: 180,\n    fontWeight: 'bold',\n    x: 229,\n    y: 81,\n    owner: 'bard',\n    color: 'white',\n    width: 1000,\n    height: 200,\n  }\n];\n\nfunction App(props) {\n\n  useDocumentTitle(Dictionary.title);\n  const user = useMagicUser();\n  const Assets = useAssetManager(defaultAssets);\n\n  return (\n    <MuiThemeProvider theme={customMuiTheme}>\n      <CssBaseline />\n      <Router>\n      <Switch >\n        <Route exact path=\"/\" render={(props) => <Home user={user} Assets={Assets} />} />\n        <Route render={() => <h1>404: page not founds</h1>} />\n      </Switch>\n      </Router>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}